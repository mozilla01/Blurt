<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%=thisUser.username%>'s profile</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />

    <link rel="stylesheet" href="/stylesheets/editProfilePic.css" />
  </head>
  <body>
    <section class="container-fluid">
      <div class="row">
        <div class="col-xl-10 col-lg-11 text-center bg-white" id="left-sidebar">
          <div
            class="d-flex justify-content-center container sticky-top"
            id="flash-2"
          >
            <%- include('../partials/flash')%>
          </div>
          <div class="d-flex justify-content-center container" id="flash-1">
            <%- include('../partials/flash')%>
          </div>
          <div id="image-container" class="d-flex justify-content-center">
            <% if(thisUser.image) {%>
            <img src="<%=thisUser.image.profile%>" alt="" class="img-fluid" />
            <% } else {%>
            <img
              src="https://res.cloudinary.com/dyg5zmebj/image/upload//c_fill,g_face,h_200,w_200/f_png/r_max/v1688624959/user_bzdfvm.jpg"
              alt=""
              class="img-fluid"
            />
            <% } %>
          </div>

          <div id="username-container" class="text-wrap text-break">
            <h3>@<%=thisUser.username%></h3>
          </div>
          <div class="edit-options">
            <h5>Edit Profile Picture</h5>
            <form
              action="/editProfilePic"
              method="POST"
              class="validated-form"
              novalidate
              enctype="multipart/form-data"
            >
              <div class="d-flex justify-content-center">
                <input type="file" id="profile_pic" name="image" required />
              </div>
              <div class="d-flex justify-content-center grid gap-5">
                <button type="submit" class="btn btn-dark">Edit</button>
              </div>

              <img src="" alt="" />
            </form>
            <%if(isImage==true) {%>
            <form action="/deleteProfilePic">
              <button type="submit" class="btn btn-danger">Delete</button>
            </form>
            <%}%>
          </div>
        </div>

        <div
          class="col-xl-2 d-flex flex-column col-1 container p-0"
          id="right-sidebar"
        >
          <div
            class="p-0 flex-grow-1 d-flex flex-column justify-content-evenly mt-4 mb-4"
          >
            <a href="/social-media">
              <div class="d-flex contents">
                <span class="material-symbols-outlined fs-2 hover" id="home">
                  home
                </span>
                <h3>Home</h3>
              </div>
            </a>

            <a href="/searchUser" id="find-friends">
              <div class="d-flex contents">
                <span class="material-symbols-outlined fs-2"> search </span>
                <h3>Find</h3>
              </div>
            </a>

            <a
              href="/social-media/<%=thisUser.username %>/invitations?q=requests"
            >
              <div class="d-flex contents">
                <span class="material-symbols-outlined fs-2">
                  notifications
                </span>
                <h3>Invitations</h3>
              </div>
            </a>

            <a href="/social-media/<%=thisUser.username %>">
              <div class="d-flex contents">
                <span class="material-symbols-outlined fs-2"> person </span>
                <h3>Profile</h3>
              </div>
            </a>
            <div class="d-flex contents">
              <button
                class="d-flex btn border-0 bg-transparent p-0 m-0 dropdown-toggle aria-expanded=false"
                type="button"
                data-bs-toggle="dropdown"
                id="log-out"
              >
                <% if(thisUser.image) {%>
                <img
                  src="<%=thisUser.image.img_48%>"
                  class="img-fluid p-1"
                  alt=""
                />
                <% } else {%>
                <img
                  src="https://res.cloudinary.com/dyg5zmebj/image/upload//c_fill,g_face,h_48,w_48/f_png/r_max/v1688626927/Social-Media/umntgolhyfldrjkcxm27.jpg"
                  alt=""
                  class="img-fluid p-1"
                />
                <%} %>
                <div class="container text-break text-wrap">
                  <h5 class="m-0 p-0 pt-1">
                    <%=thisUser.firstname%> <%=thisUser.lastname%>
                  </h5>

                  <p class="m-0 p-0 text-secondary">@<%=thisUser.username%></p>
                </div>
              </button>
              <ul class="dropdown-menu">
                <li class="dropdown-item">
                  <a
                    class="text-center bg-warning dropdrown-anchor"
                    href="/logout"
                    ><h5>Logout</h5></a
                  >
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
    <footer class="footer fixed-bottom py-1 bg-white mt-auto">
      <div class="container">
        <div
          class="d-flex justify-content-between ps-1 pe-1 align-items-center"
        >
          <a href="/social-media"
            ><span class="material-symbols-outlined fs-1 hover" id="home">
              home
            </span></a
          >
          <a href="/searchUser"
            ><span class="material-symbols-outlined fs-1"> search </span></a
          >

          <a href="/social-media/<%=thisUser.username %>/invitations?q=requests"
            ><span class="material-symbols-outlined fs-1">
              notifications
            </span></a
          >
          <a href="/social-media/<%=thisUser.username %>"
            ><span class="material-symbols-outlined fs-1"> person </span></a
          >
        </div>
      </div>
    </footer>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>

    <script src="/javascripts/clickResponses.js"></script>
    <script src="/javascripts/setContent.js"></script>
    <script src="/javascripts/createPostSubmit.js"></script>
  </body>
</html>
